بسیار خوب! از فایل سؤالات امتحانی با عنوان **Final\_DSP\_ver2.pdf** مشخصه که چند سؤال کاملاً با مباحث اسلایدهایی که بررسی کردیم (SNR، Median Filter، Ensemble Averaging، Moving Average) قابل حل هستند.

---

## ✅ **سؤال 1 از امتحان: محاسبه SNR با روش‌های مختلف کاهش نویز**

> متن سؤال:
> فرض کنید ما ۴ سیگنال آغشته به نویز داریم. سیگنال اصلی نیز موجود است. با استفاده از روش‌های **Ensemble Averaging** و **Median Filter**، مقدار SNR را محاسبه کنید.

---

### 🎯 **مرحله 1: داده‌ها از سؤال**

| نمونه‌ها (n) | 0   | 1   | 2   | 3   | 4   |
| ------------ | --- | --- | --- | --- | --- |
| Signal 1     | 6.1 | 7.4 | 4.7 | 8.1 | 3.2 |
| Signal 2     | 5.8 | 6.4 | 5.1 | 9.1 | 2.9 |
| Signal 3     | 6.2 | 7.1 | 5.3 | 8.7 | 3.1 |
| Signal 4     | 5.8 | 7.2 | 4.9 | 8.8 | 2.7 |
| Original     | 6.0 | 7.0 | 5.0 | 9.0 | 3.0 |

---

### 🎯 **مرحله 2: محاسبه Ensemble Average**

میانگین هر نمونه بین ۴ سیگنال noisy:

```
Ensemble:
n=0 → (6.1 + 5.8 + 6.2 + 5.8) / 4 = 6.0
n=1 → (7.4 + 6.4 + 7.1 + 7.2) / 4 = 7.025
n=2 → (4.7 + 5.1 + 5.3 + 4.9) / 4 = 5.0
n=3 → (8.1 + 9.1 + 8.7 + 8.8) / 4 = 8.925
n=4 → (3.2 + 2.9 + 3.1 + 2.7) / 4 = 2.975
```

---

### 🎯 **مرحله 3: محاسبه Median Filter**

در هر نمونه، مقدار میانه بین ۴ سیگنال:

```
n=0 → median(6.1, 5.8, 6.2, 5.8) = 5.9
n=1 → median(7.4, 6.4, 7.1, 7.2) = 7.15
n=2 → median(4.7, 5.1, 5.3, 4.9) = 5.0
n=3 → median(8.1, 9.1, 8.7, 8.8) = 8.75
n=4 → median(3.2, 2.9, 3.1, 2.7) = 3.0
```

---

### 🎯 **مرحله 4: انرژی سیگنال اصلی**



![Math Formula](<https://latex.codecogs.com/svg.latex?E_%7B%5Ctext%7Bsignal%7D%7D%20%3D%206%5E2%20%2B%207%5E2%20%2B%205%5E2%20%2B%209%5E2%20%2B%203%5E2%20%3D%2036%20%2B%2049%20%2B%2025%20%2B%2081%20%2B%209%20%3D%20%5Cboxed%7B200%7D>)


---

### 🎯 **مرحله 5: انرژی نویز**

#### 🟡 برای Ensemble:

```
Noise = [0, 0.025, 0, 0.075, -0.025]
E_noise = 0^2 + 0.025^2 + 0^2 + 0.075^2 + 0.025^2
        = 0 + 0.000625 + 0 + 0.005625 + 0.000625
        = 0.006875
```



![Math Formula](<https://latex.codecogs.com/svg.latex?SNR_%7B%5Ctext%7BEnsemble%7D%7D%20%3D%2010%20%5Clog_%7B10%7D%28200%20/%200.006875%29%20%E2%89%88%20%5Cboxed%7B44.64%5Ctext%7B%20dB%7D%7D>)


---

#### 🟡 برای Median:

```
Noise = [-0.1, 0.15, 0, -0.25, 0]
E_noise = 0.01 + 0.0225 + 0 + 0.0625 + 0 = 0.095
```



![Math Formula](<https://latex.codecogs.com/svg.latex?SNR_%7B%5Ctext%7BMedian%7D%7D%20%3D%2010%20%5Clog_%7B10%7D%28200%20/%200.095%29%20%E2%89%88%20%5Cboxed%7B33.23%5Ctext%7B%20dB%7D%7D>)


---

### ✅ نتیجه:

* **Ensemble averaging دقت بسیار بالاتری** دارد (SNR ≈ 44.6 dB) نسبت به median (≈ 33.2 dB).
* اما اگر نویز شدید و پراکنده باشد، ممکن است **Median بهتر عمل کند**.
